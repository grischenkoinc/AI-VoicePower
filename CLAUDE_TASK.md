# –ü—Ä–æ–º–ø—Ç –¥–ª—è Claude Code ‚Äî Phase 1.3: Diagnostic Flow

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ü—Ä–æ–¥–æ–≤–∂—É—é —Ä–æ–∑—Ä–æ–±–∫—É AI VoicePower. –ó–∞–≤–µ—Ä—à–µ–Ω—ñ —Ñ–∞–∑–∏:
- ‚úÖ Phase 0.1-0.6 ‚Äî Infrastructure
- ‚úÖ Phase 1.1 ‚Äî Splash Screen
- ‚úÖ Phase 1.2 ‚Äî Onboarding Flow

–ó–∞—Ä–∞–∑ **Phase 1.3 ‚Äî Diagnostic Flow** ‚Äî –ø–µ—Ä—à–∞ –æ—Ü—ñ–Ω–∫–∞ –Ω–∞–≤–∏—á–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

**–ó–≥—ñ–¥–Ω–æ –∑ PHASE_STRUCTURE_GUIDE.md**, —Ü–µ –°–ö–õ–ê–î–ù–ê –ø—ñ–¥—Ñ–∞–∑–∞ –∑ recording logic (–º–∞—î –±—É—Ç–∏ –æ–∫—Ä–µ–º–æ –≤—ñ–¥ –ø—Ä–æ—Å—Ç–∏—Ö UI —Ñ–∞–∑).

**–°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** `SPECIFICATION.md`, —Å–µ–∫—Ü—ñ—è 4.3.2 (Diagnostic Screen).

**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** üî¥ –°–ï–†–ï–î–ù–Ø-–í–ò–°–û–ö–ê (recording, state management, 4 tasks)
**–ß–∞—Å:** ‚è±Ô∏è 2-3 –≥–æ–¥–∏–Ω–∏

---

## –ó–∞–¥–∞—á–∞ Phase 1.3

–°—Ç–≤–æ—Ä–∏—Ç–∏ –µ–∫—Ä–∞–Ω –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑ **4 –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏**:

| # | –ó–∞–≤–¥–∞–Ω–Ω—è | –ß–∞—Å | –©–æ –∞–Ω–∞–ª—ñ–∑—É—î—Ç—å—Å—è |
|---|----------|-----|-----------------|
| 1 | –ß–∏—Ç–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É | 90 —Å–µ–∫ | –î–∏–∫—Ü—ñ—è, —Ç–µ–º–ø, –ø–∞—É–∑–∏ |
| 2 | –°–ø–æ–Ω—Ç–∞–Ω–Ω–µ –º–æ–≤–ª–µ–Ω–Ω—è | 60 —Å–µ–∫ | –°—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–∞—Ä–∞–∑–∏—Ç–∏, –ø–ª–∞–≤–Ω—ñ—Å—Ç—å |
| 3 | –ï–º–æ—Ü—ñ–π–Ω–µ —á–∏—Ç–∞–Ω–Ω—è | 60 —Å–µ–∫ | –Ü–Ω—Ç–æ–Ω–∞—Ü—ñ—è, –≤–∏—Ä–∞–∑–Ω—ñ—Å—Ç—å |
| 4 | –ü–µ—Ä–µ–∫–æ–Ω–ª–∏–≤–∞ –ø—Ä–æ–º–æ–≤–∞ | 60 —Å–µ–∫ | –í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å, –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü—ñ—è |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 4 –∞—É–¥—ñ–æ–∑–∞–ø–∏—Å–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ Room ‚Üí –≥–æ—Ç–æ–≤—ñ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –≤ Phase 1.4

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
ui/screens/diagnostic/
‚îú‚îÄ‚îÄ DiagnosticScreen.kt
‚îú‚îÄ‚îÄ DiagnosticViewModel.kt
‚îú‚îÄ‚îÄ DiagnosticState.kt
‚îú‚îÄ‚îÄ DiagnosticEvent.kt
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ DiagnosticTaskCard.kt
    ‚îú‚îÄ‚îÄ DiagnosticInstructionDialog.kt
    ‚îú‚îÄ‚îÄ DiagnosticRecordingDialog.kt
    ‚îú‚îÄ‚îÄ DiagnosticRecordingPreviewDialog.kt
    ‚îî‚îÄ‚îÄ DiagnosticProgressBar.kt

utils/audio/
‚îú‚îÄ‚îÄ AudioRecorderUtil.kt (placeholder)
‚îî‚îÄ‚îÄ AudioPermissionHelper.kt (placeholder)
```

---

## UI Flow

```
Step 1: Task List
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (1/4)              [X]    ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 25%               ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ üìñ –ß–∏—Ç–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É        ‚úÖ      ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ üó£Ô∏è –°–ø–æ–Ω—Ç–∞–Ω–Ω–µ –º–æ–≤–ª–µ–Ω–Ω—è   ‚ñ∂Ô∏è –ü–æ—á–∞—Ç–∏‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ üé≠ –ï–º–æ—Ü—ñ–π–Ω–µ —á–∏—Ç–∞–Ω–Ω—è     ‚è∏Ô∏è       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ üíº –ü–µ—Ä–µ–∫–æ–Ω–ª–∏–≤–∞ –ø—Ä–æ–º–æ–≤–∞  ‚è∏Ô∏è       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Step 2: Instruction Dialog
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üó£Ô∏è –°–ø–æ–Ω—Ç–∞–Ω–Ω–µ –º–æ–≤–ª–µ–Ω–Ω—è                 ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  üìù –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:                        ‚îÇ
‚îÇ  –†–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —Å–≤—ñ–π –∑–≤–∏—á–∞–π–Ω–∏–π –¥–µ–Ω—å...    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  ‚è±Ô∏è –ß–∞—Å: 60 —Å–µ–∫—É–Ω–¥                     ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  üí° –ü—ñ–¥–∫–∞–∑–∫–∏:                          ‚îÇ
‚îÇ  ‚Ä¢ –ì–æ–≤–æ—Ä–∏ –ø—Ä–∏—Ä–æ–¥–Ω–æ                     ‚îÇ
‚îÇ  ‚Ä¢ –ù–µ —Ö–≤–∏–ª—é–π—Å—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏             ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  [–ù–∞–∑–∞–¥] [–ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å ‚Üí]              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Step 3: Recording
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üé§ –ó–∞–ø–∏—Å...                           ‚îÇ
‚îÇ          00:47 / 01:00                 ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 78%        ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ         üé§ (animated icon)             ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ         –ì–æ–≤–æ—Ä—ñ—Ç—å...                    ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ      [üî¥ –ó—É–ø–∏–Ω–∏—Ç–∏ –∑–∞–ø–∏—Å]               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Step 4: Preview
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚úÖ –ó–∞–ø–∏—Å –∑–∞–≤–µ—Ä—à–µ–Ω–æ!                   ‚îÇ
‚îÇ  –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: 00:58                     ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  [‚ñ∂Ô∏è –ü—Ä–æ—Å–ª—É—Ö–∞—Ç–∏]                       ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  –ó–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º?              ‚îÇ
‚îÇ  [–ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏] [–ó–±–µ—Ä–µ–≥—Ç–∏ ‚úì]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ü–æ–≤–Ω–∏–π –∫–æ–¥ —Ñ–∞–π–ª—ñ–≤

[... —Ç—É—Ç —É–≤–µ—Å—å –∫–æ–¥ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: DiagnosticState, DiagnosticEvent, DiagnosticViewModel, DiagnosticScreen, –≤—Å—ñ components ...]

(–Ø –ø—Ä–æ–ø—É—Å–∫–∞—é –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è, –±–æ —Ç–∏ –≤–∂–µ –±–∞—á–∏–≤ –ø–æ–≤–Ω–∏–π –∫–æ–¥ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Å–ø—Ä–æ–±—ñ. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ - —Å–∫–∞–∂–∏, —è –¥–æ–¥–∞–º –≤–µ—Å—å –∫–æ–¥ –∑–Ω–æ–≤—É)

---

## –í–∞–∂–ª–∏–≤—ñ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 1. **Fake Audio Recording** (–ø–æ–∫–∏ —â–æ)

Phase 1.3 –ù–ï —Ä–æ–±–∏—Ç—å —Ä–µ–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Å –∞—É–¥—ñ–æ. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ:

```kotlin
// –í DiagnosticViewModel
private fun stopRecording() {
    recordingTimerJob?.cancel()
    
    // FAKE recording path
    val recordingPath = "recordings/diagnostic_${UUID.randomUUID()}.m4a"
    
    _state.update {
        it.copy(
            isRecording = false,
            currentRecordingPath = recordingPath,
            showRecordingPreview = true
        )
    }
    
    // TODO Phase 2.x: –¢—É—Ç –±—É–¥–µ —Ä–µ–∞–ª—å–Ω–∏–π AudioRecorderUtil
}
```

**–ß–æ–º—É fake?** –†–µ–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Å –∞—É–¥—ñ–æ ‚Äî —Ü–µ –æ–∫—Ä–µ–º–∞ —Å–∫–ª–∞–¥–Ω–∞ –∑–∞–¥–∞—á–∞ (–ø–µ—Ä–º—ñ—à–µ–Ω–∏, MediaRecorder, file management). Phase 1.3 —Ñ–æ–∫—É—Å—É—î—Ç—å—Å—è –Ω–∞ **UI flow —Ç–∞ state management**.

### 2. **Recording Metadata –≤ Room**

–ó–∞–ø–∏—Å—É—î–º–æ metadata –≤ –ë–î, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ñ–∞–π–ª —â–µ –Ω–µ —ñ—Å–Ω—É—î:

```kotlin
val recordingEntity = RecordingEntity(
    id = UUID.randomUUID().toString(),
    filePath = recordingPath,        // Fake path
    durationMs = durationSeconds * 1000L,
    type = "diagnostic",
    contextId = "initial_diagnostic",
    exerciseId = taskId,
    isAnalyzed = false               // –ë—É–¥–µ true –ø—ñ—Å–ª—è Phase 1.4
)
recordingDao.insert(recordingEntity)
```

### 3. **Task Status Flow**

```
PENDING ‚Üí (click) ‚Üí IN_PROGRESS ‚Üí (recording) ‚Üí RECORDED ‚Üí (analysis Phase 1.4) ‚Üí COMPLETED
```

### 4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑—É–ø–∏–Ω–∫–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É**

```kotlin
// –í onEvent(RecordingTick)
val maxDuration = _state.value.selectedTask?.durationSeconds ?: 60
if (event.seconds >= maxDuration) {
    stopRecording() // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
}
```

### 5. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–¥–∞—á**

```kotlin
private fun checkIfAllTasksCompleted() {
    val allRecorded = _state.value.tasks.all { 
        it.status == TaskStatus.RECORDED 
    }
    
    if (allRecorded) {
        // –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É "–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É"
    }
}
```

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### 1. –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è
```bash
./gradlew assembleDebug
```
–ú–∞—î —Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫.

### 2. Manual Testing Flow

**–¢–µ—Å—Ç 1: Task List**
- [ ] –í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤—Å—ñ 4 –∑–∞–¥–∞—á—ñ
- [ ] Progress bar –ø–æ–∫–∞–∑—É—î 0/4
- [ ] –¢—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∞ –∑–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞ (—ñ–Ω—à—ñ disabled)

**–¢–µ—Å—Ç 2: Instruction Dialog**
- [ ] –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ Task 1 ‚Üí –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –¥—ñ–∞–ª–æ–≥
- [ ] –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è + —Ç–µ–∫—Å—Ç –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è
- [ ] –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –∑–∞–∫—Ä–∏–≤–∞—î –¥—ñ–∞–ª–æ–≥
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ recording

**–¢–µ—Å—Ç 3: Recording Dialog**
- [ ] –¢–∞–π–º–µ—Ä –ø—Ä–∞—Ü—é—î (0:01, 0:02, 0:03...)
- [ ] Progress bar –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
- [ ] –ö–Ω–æ–ø–∫–∞ "–ó—É–ø–∏–Ω–∏—Ç–∏" –ø—Ä–∞—Ü—é—î
- [ ] –ê–≤—Ç–æ-–∑—É–ø–∏–Ω–∫–∞ –ø–æ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—é –º–∞–∫—Å. —á–∞—Å—É

**–¢–µ—Å—Ç 4: Preview Dialog**
- [ ] –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∑–∞–ø–∏—Å—É
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏" ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î –¥–æ instruction
- [ ] –ö–Ω–æ–ø–∫–∞ "–ó–±–µ—Ä–µ–≥—Ç–∏" ‚Üí –∑–∞–¥–∞—á–∞ –ø–æ–∑–Ω–∞—á–∞—î—Ç—å—Å—è ‚úÖ

**–¢–µ—Å—Ç 5: All Tasks Flow**
- [ ] –ü—Ä–æ–π—Ç–∏ –≤—Å—ñ 4 –∑–∞–¥–∞—á—ñ
- [ ] Progress bar: 1/4 ‚Üí 2/4 ‚Üí 3/4 ‚Üí 4/4
- [ ] –ü—ñ—Å–ª—è 4/4 –∑'—è–≤–ª—è—î—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É"

### 3. Database Verification

```kotlin
// –í DiagnosticViewModel –∞–±–æ –æ–∫—Ä–µ–º–æ–º—É —Ç–µ—Å—Ç—ñ
viewModelScope.launch {
    recordingDao.getAllRecordings().collect { recordings ->
        println("üìä Total recordings: ${recordings.size}")
        recordings.forEach { rec ->
            println("  - ${rec.exerciseId}: ${rec.durationMs}ms")
        }
    }
}
```

–ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ 4 –∑–∞–ø–∏—Å–∏ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–¥–∞—á.

---

## –©–æ –ù–ï —Ä–æ–±–∏—Ç–∏ –≤ Phase 1.3

‚ùå **–ù–ï —Ä–æ–±–∏—Ç–∏:**
1. –†–µ–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Å –∞—É–¥—ñ–æ (MediaRecorder, AudioRecord)
2. –ó–∞–ø–∏—Ç –ø–µ—Ä–º—ñ—à–µ–Ω—ñ–≤ –Ω–∞ –º—ñ–∫—Ä–æ—Ñ–æ–Ω (–ø–æ–∫–∏ fake)
3. –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ (Audio playback)
4. Waveform visualization
5. Real-time transcription
6. AI-–∞–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Å—ñ–≤ (—Ü–µ Phase 1.4)

‚úÖ **–†–æ–±–∏—Ç–∏:**
1. UI flow (task list, dialogs, navigation)
2. State management (DiagnosticState, events)
3. Timer logic
4. Fake recording metadata –≤ Room
5. Task status updates
6. Progress tracking

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "HorizontalPager not found"
```kotlin
// –î–æ–¥–∞—Ç–∏ –≤ build.gradle.kts
implementation("androidx.compose.foundation:foundation:1.6.0")
```

### –ü—Ä–æ–±–ª–µ–º–∞: "collectAsStateWithLifecycle not found"
```kotlin
implementation("androidx.lifecycle:lifecycle-runtime-compose:2.7.0")
```

### –ü—Ä–æ–±–ª–µ–º–∞: Recording timer –Ω–µ –ø—Ä–∞—Ü—é—î
–ü–µ—Ä–µ–≤—ñ—Ä —â–æ `recordingTimerJob` –Ω–µ cancel-–∏—Ç—å—Å—è –ø–µ—Ä–µ–¥—á–∞—Å–Ω–æ:
```kotlin
private var recordingTimerJob: Job? = null

private fun startRecording() {
    recordingTimerJob?.cancel() // Cancel –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π
    recordingTimerJob = viewModelScope.launch {
        while (_state.value.isRecording) {
            delay(1000)
            // ...
        }
    }
}
```

---

## –ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫

**Phase 1.4: Diagnostic Results** ‚Äî –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑ fake AI scores, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó, –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –¥–æ Home.

---

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- **Audio recording** –±—É–¥–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –æ–∫—Ä–µ–º–æ (–º–æ–∂–ª–∏–≤–æ Phase 2.x –∞–±–æ –∫–æ–ª–∏ –±—É–¥–µ –ø–æ—Ç—Ä–µ–±–∞)
- **Audio playback** —Ç–∞–∫–æ–∂ –æ–∫—Ä–µ–º–æ
- Phase 1.3 ‚Äî —Ü–µ **UI skeleton** –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, —è–∫–∏–π –ø—Ä–∞—Ü—é—î –∑ fake –¥–∞–Ω–∏–º–∏
- Phase 1.4 –¥–æ–¥–∞—Å—Ç—å **fake AI analysis** (—Ä–µ–∞–ª—å–Ω–∏–π AI –±—É–¥–µ –≤ Phase 6)