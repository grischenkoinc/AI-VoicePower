# ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ Claude Code â€” Phase 2.3: Breathing Screen

## ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚

ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ²Ğ¶ÑƒÑ Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±ĞºÑƒ AI VoicePower. Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ñ– Ñ„Ğ°Ğ·Ğ¸:
- âœ… Phase 0.1-0.6 â€” Infrastructure  
- âœ… Phase 1.1-1.4 â€” Onboarding + Diagnostic
- âœ… Phase 2.1 â€” Warmup Main Screen
- âœ… Phase 2.2 â€” Articulation Screen

Ğ—Ğ°Ñ€Ğ°Ğ· **Phase 2.3 â€” Breathing Screen** â€” Ğ´Ğ¸Ñ…Ğ°Ğ»ÑŒĞ½Ñ– Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ¸ Ğ· **Canvas animations**.

**Ğ—Ğ³Ñ–Ğ´Ğ½Ğ¾ Ğ· PHASE_STRUCTURE_GUIDE.md**: Ğ’Ğ˜Ğ¡ĞĞšĞ ÑĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ (Canvas animations, haptic feedback).

**Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ:** `SPECIFICATION.md`, ÑĞµĞºÑ†Ñ–Ñ 4.3.4 + 5.4 (Warmup Exercise, Breathing).

**Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ:** ğŸ”´ Ğ’Ğ˜Ğ¡ĞĞšĞ  
**Ğ§Ğ°Ñ:** â±ï¸ 3-4 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸

---

## ĞšĞ»ÑÑ‡Ğ¾Ğ²Ğ° Ñ–Ğ´ĞµÑ

âš ï¸ **Ğ‘Ğ•Ğ— Ğ·Ğ°Ğ¿Ğ¸ÑÑƒ Ğ°ÑƒĞ´Ñ–Ğ¾!** Ğ”Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ â€” Ñ†Ğµ Ñ„Ñ–Ğ·Ğ¸Ñ‡Ğ½Ğ° Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ°.

**ĞœĞµÑ…Ğ°Ğ½Ñ–ĞºĞ°:**
1. ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚Ğ¸ ÑĞ¿Ğ¸ÑĞ¾Ğº 8 Ğ´Ğ¸Ñ…Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ²Ğ¿Ñ€Ğ°Ğ²
2. ĞšĞ»Ñ–Ğº Ğ½Ğ° Ğ²Ğ¿Ñ€Ğ°Ğ²Ñƒ â†’ Ğ¿Ğ¾Ğ²Ğ½Ğ¾ĞµĞºÑ€Ğ°Ğ½Ğ½Ğ¸Ğ¹ Ğ´Ñ–Ğ°Ğ»Ğ¾Ğ³ Ğ· **Ğ°Ğ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ”Ñ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ**
3. ĞĞ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ ĞºĞµÑ€ÑƒÑ” Ñ€Ğ¸Ñ‚Ğ¼Ğ¾Ğ¼ (Ğ²Ğ´Ğ¸Ñ…/Ğ²Ğ¸Ğ´Ğ¸Ñ…/Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°)
4. **Ğ’Ñ–Ğ±Ñ€Ğ°Ñ†Ñ–Ñ** Ğ½Ğ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°Ñ… (Ğ²Ğ´Ğ¸Ñ… â†’ Ğ²Ğ¸Ğ´Ğ¸Ñ…)
5. ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡ ÑĞ»Ñ–Ğ´ÑƒÑ” Ğ°Ğ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ—
6. ĞŸÑ–ÑĞ»Ñ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ â†’ Ğ¿Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°Ñ”Ñ‚ÑŒÑÑ ÑĞº Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾ âœ…
7. ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑ Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ² Room

---

## Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Phase 2.3

Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ĞµĞºÑ€Ğ°Ğ½ Ğ· **8 Ğ´Ğ¸Ñ…Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¼Ğ¸ Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ°Ğ¼Ğ¸**:

| # | ĞĞ°Ğ·Ğ²Ğ° | Ğ¢Ñ€Ğ¸Ğ²Ğ°Ğ»Ñ–ÑÑ‚ÑŒ | ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ |
|---|-------|-----------|-----------------|
| 1 | Ğ”Ñ–Ğ°Ñ„Ñ€Ğ°Ğ³Ğ¼Ğ°Ğ»ÑŒĞ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 60 ÑĞµĞº | 4 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…, 4 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… |
| 2 | ĞšĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 60 ÑĞµĞº | 4-4-4-4 (Ğ²Ğ´Ğ¸Ñ…-Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°-Ğ²Ğ¸Ğ´Ğ¸Ñ…-Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°) |
| 3 | 4-7-8 Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 60 ÑĞµĞº | 4 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…, 7 ÑĞµĞº Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°, 8 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… |
| 4 | Ğ¡Ğ¿Ğ¾ĞºÑ–Ğ¹Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 45 ÑĞµĞº | 3 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…, 5 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… |
| 5 | Ğ•Ğ½ĞµÑ€Ğ³Ñ–Ğ¹Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 30 ÑĞµĞº | 2 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…, 2 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… (ÑˆĞ²Ğ¸Ğ´ĞºĞ¾) |
| 6 | Ğ“Ğ»Ğ¸Ğ±Ğ¾ĞºĞµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 60 ÑĞµĞº | 6 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…, 6 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… |
| 7 | Ğ Ğ¾Ğ·ÑĞ»Ğ°Ğ±Ğ»ÑÑÑ‡Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 60 ÑĞµĞº | 4 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…, 8 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… |
| 8 | Ğ Ğ¸Ñ‚Ğ¼Ñ–Ñ‡Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ | 45 ÑĞµĞº | 3-3-3-3 |

**Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ:** ~7 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½ (ÑĞºÑ‰Ğ¾ Ğ²Ğ¸ĞºĞ¾Ğ½ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ²ÑÑ–)

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²

```
ui/screens/warmup/
â”œâ”€â”€ BreathingScreen.kt
â”œâ”€â”€ BreathingViewModel.kt
â”œâ”€â”€ BreathingState.kt
â”œâ”€â”€ BreathingEvent.kt
â””â”€â”€ components/
    â”œâ”€â”€ BreathingExerciseItem.kt (ĞºĞ°Ñ€Ñ‚ĞºĞ° Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ¸)
    â””â”€â”€ BreathingExerciseDialog.kt (Ğ¿Ğ¾Ğ²Ğ½Ğ¾ĞµĞºÑ€Ğ°Ğ½Ğ½Ğ¸Ğ¹ Ğ· Ğ°Ğ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ”Ñ)

ui/components/breathing/ (Ğ½Ğ¾Ğ²Ñ– ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸)
â”œâ”€â”€ BreathingAnimation.kt (Canvas ĞºĞ¾Ğ»Ğ¾ Ñ‰Ğ¾ Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ÑÑ”Ñ‚ÑŒÑÑ/ÑÑ‚Ğ¸ÑĞºĞ°Ñ”Ñ‚ÑŒÑÑ)
â”œâ”€â”€ BreathingCircle.kt (Canvas implementation)
â””â”€â”€ BreathingPhaseText.kt ("Ğ’Ğ´Ğ¸Ñ…...", "Ğ’Ğ¸Ğ´Ğ¸Ñ…...", "Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°...")

utils/
â””â”€â”€ HapticFeedbackUtil.kt (Ğ²Ñ–Ğ±Ñ€Ğ°Ñ†Ñ–Ñ)
```

---

## UI Design

```
Step 1: Exercise List (ÑĞº Ğ² Phase 2.2)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Ğ”Ğ¸Ñ…Ğ°Ğ»ÑŒĞ½Ñ– Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ¸                           â”‚
â”‚  Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾: 3/8                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”â”â”â”â”â”â”â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹  38%                  â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… 1. Ğ”Ñ–Ğ°Ñ„Ñ€Ğ°Ğ³Ğ¼Ğ°Ğ»ÑŒĞ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ   60 ÑĞµĞº   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â—‹ 2. ĞšĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ        60 ÑĞµĞº   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ...                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Breathing Dialog (FULLSCREEN)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞšĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ                     [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚                                              â”‚
â”‚              â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                 â”‚
â”‚             â•±               â•²                â”‚
â”‚            â”‚     Ğ’Ğ”Ğ˜Ğ¥...     â”‚               â”‚  â† Animated
â”‚            â”‚                 â”‚               â”‚     Circle
â”‚            â”‚    00:04 / 60   â”‚               â”‚
â”‚             â•²               â•±                â”‚
â”‚              â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                 â”‚
â”‚                                              â”‚
â”‚                                              â”‚
â”‚          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹â—‹â—‹â—‹â—‹  60%            â”‚
â”‚                                              â”‚
â”‚                                              â”‚
â”‚  ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½: 4 ÑĞµĞº Ğ²Ğ´Ğ¸Ñ… â†’ 4 ÑĞµĞº Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° â†’     â”‚
â”‚           4 ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ… â†’ 4 ÑĞµĞº Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°       â”‚
â”‚                                              â”‚
â”‚              [â¸ï¸ ĞŸĞ°ÑƒĞ·Ğ°]                       â”‚
â”‚                                              â”‚
â”‚  [ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸]          [Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ âœ“]           â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞĞ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ ĞºĞ¾Ğ»Ğ°:
- Ğ’Ğ´Ğ¸Ñ…: ĞºĞ¾Ğ»Ğ¾ Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ÑÑ”Ñ‚ÑŒÑÑ (scale 1.0 â†’ 1.5)
- Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°: ĞºĞ¾Ğ»Ğ¾ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ
- Ğ’Ğ¸Ğ´Ğ¸Ñ…: ĞºĞ¾Ğ»Ğ¾ ÑÑ‚Ğ¸ÑĞºĞ°Ñ”Ñ‚ÑŒÑÑ (scale 1.5 â†’ 1.0)
- Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°: ĞºĞ¾Ğ»Ğ¾ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ

Ğ’Ñ–Ğ±Ñ€Ğ°Ñ†Ñ–Ñ:
- ĞĞ° Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ Ğ²Ğ´Ğ¸Ñ…Ñƒ (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ¿ÑƒĞ»ÑŒÑ)
- ĞĞ° Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ Ğ²Ğ¸Ğ´Ğ¸Ñ…Ñƒ (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ¿ÑƒĞ»ÑŒÑ)
```

---

## ĞŸĞ¾Ğ²Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ´

### 1. BreathingState.kt

```kotlin
package com.aivoicepower.ui.screens.warmup

data class BreathingState(
    val exercises: List<BreathingExercise> = getBreathingExercises(),
    val completedToday: Set<Int> = emptySet(),
    val selectedExercise: BreathingExercise? = null,
    val isExerciseDialogOpen: Boolean = false,
    val totalSeconds: Int = 0,
    val elapsedSeconds: Int = 0,
    val currentPhase: BreathingPhase = BreathingPhase.INHALE,
    val phaseProgress: Float = 0f, // 0.0 - 1.0
    val isRunning: Boolean = false
)

data class BreathingExercise(
    val id: Int,
    val title: String,
    val durationSeconds: Int,
    val pattern: BreathingPattern,
    val description: String
)

data class BreathingPattern(
    val inhaleSeconds: Int,
    val inhaleHoldSeconds: Int = 0,
    val exhaleSeconds: Int,
    val exhaleHoldSeconds: Int = 0
) {
    val cycleDurationSeconds: Int
        get() = inhaleSeconds + inhaleHoldSeconds + exhaleSeconds + exhaleHoldSeconds
}

enum class BreathingPhase {
    INHALE,        // Ğ’Ğ´Ğ¸Ñ…
    INHALE_HOLD,   // Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° Ğ¿Ñ–ÑĞ»Ñ Ğ²Ğ´Ğ¸Ñ…Ñƒ
    EXHALE,        // Ğ’Ğ¸Ğ´Ğ¸Ñ…
    EXHALE_HOLD    // Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° Ğ¿Ñ–ÑĞ»Ñ Ğ²Ğ¸Ğ´Ğ¸Ñ…Ñƒ
}

private fun getBreathingExercises(): List<BreathingExercise> {
    return listOf(
        BreathingExercise(
            id = 1,
            title = "Ğ”Ñ–Ğ°Ñ„Ñ€Ğ°Ğ³Ğ¼Ğ°Ğ»ÑŒĞ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 60,
            pattern = BreathingPattern(
                inhaleSeconds = 4,
                exhaleSeconds = 4
            ),
            description = "Ğ“Ğ»Ğ¸Ğ±Ğ¾ĞºĞµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ¾Ğ¼. ĞŸĞ¾ĞºĞ»Ğ°Ğ´Ñ–Ñ‚ÑŒ Ñ€ÑƒĞºÑƒ Ğ½Ğ° Ğ¶Ğ¸Ğ²Ñ–Ñ‚ Ñ– Ğ²Ñ–Ğ´Ñ‡ÑƒĞ¹Ñ‚Ğµ ÑĞº Ğ²Ñ–Ğ½ Ğ¿Ñ–Ğ´Ğ½Ñ–Ğ¼Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ²Ğ´Ğ¸Ñ…Ñƒ."
        ),
        BreathingExercise(
            id = 2,
            title = "ĞšĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 60,
            pattern = BreathingPattern(
                inhaleSeconds = 4,
                inhaleHoldSeconds = 4,
                exhaleSeconds = 4,
                exhaleHoldSeconds = 4
            ),
            description = "Ğ Ñ–Ğ²Ğ½Ñ– Ñ–Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ñ— Ñ„Ğ°Ğ·Ğ¸. Ğ”Ğ¾Ğ¿Ğ¾Ğ¼Ğ°Ğ³Ğ°Ñ” Ğ·Ğ¾ÑĞµÑ€ĞµĞ´Ğ¸Ñ‚Ğ¸ÑÑ Ñ‚Ğ° Ğ·Ğ°ÑĞ¿Ğ¾ĞºĞ¾Ñ—Ñ‚Ğ¸ÑÑ."
        ),
        BreathingExercise(
            id = 3,
            title = "4-7-8 Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 60,
            pattern = BreathingPattern(
                inhaleSeconds = 4,
                inhaleHoldSeconds = 7,
                exhaleSeconds = 8
            ),
            description = "Ğ¢ĞµÑ…Ğ½Ñ–ĞºĞ° Ğ´Ğ»Ñ ÑˆĞ²Ğ¸Ğ´ĞºĞ¾Ğ³Ğ¾ Ğ·Ğ°ÑĞ¿Ğ¾ĞºĞ¾Ñ”Ğ½Ğ½Ñ. Ğ”Ğ¾Ğ²Ğ³Ğ¸Ğ¹ Ğ²Ğ¸Ğ´Ğ¸Ñ… Ğ°ĞºÑ‚Ğ¸Ğ²ÑƒÑ” Ğ¿Ğ°Ñ€Ğ°ÑĞ¸Ğ¼Ğ¿Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñƒ Ğ½ĞµÑ€Ğ²Ğ¾Ğ²Ñƒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ."
        ),
        BreathingExercise(
            id = 4,
            title = "Ğ¡Ğ¿Ğ¾ĞºÑ–Ğ¹Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 45,
            pattern = BreathingPattern(
                inhaleSeconds = 3,
                exhaleSeconds = 5
            ),
            description = "Ğ”Ğ¾Ğ²ÑˆĞ¸Ğ¹ Ğ²Ğ¸Ğ´Ğ¸Ñ… Ğ´Ğ¾Ğ¿Ğ¾Ğ¼Ğ°Ğ³Ğ°Ñ” Ñ€Ğ¾Ğ·ÑĞ»Ğ°Ğ±Ğ¸Ñ‚Ğ¸ÑÑ. Ğ†Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ´ ÑĞ½Ğ¾Ğ¼."
        ),
        BreathingExercise(
            id = 5,
            title = "Ğ•Ğ½ĞµÑ€Ğ³Ñ–Ğ¹Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 30,
            pattern = BreathingPattern(
                inhaleSeconds = 2,
                exhaleSeconds = 2
            ),
            description = "Ğ¨Ğ²Ğ¸Ğ´ĞºĞµ Ñ€Ğ¸Ñ‚Ğ¼Ñ–Ñ‡Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ Ğ´Ğ»Ñ Ğ¿Ñ–Ğ´Ğ²Ğ¸Ñ‰ĞµĞ½Ğ½Ñ ĞµĞ½ĞµÑ€Ğ³Ñ–Ñ—. Ğ‘ÑƒĞ´ÑŒÑ‚Ğµ Ğ¾Ğ±ĞµÑ€ĞµĞ¶Ğ½Ñ–, Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑÑ‚Ğ°Ñ€Ğ°Ğ¹Ñ‚ĞµÑÑ."
        ),
        BreathingExercise(
            id = 6,
            title = "Ğ“Ğ»Ğ¸Ğ±Ğ¾ĞºĞµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 60,
            pattern = BreathingPattern(
                inhaleSeconds = 6,
                exhaleSeconds = 6
            ),
            description = "ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğµ Ğ³Ğ»Ğ¸Ğ±Ğ¾ĞºĞµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ Ğ½Ğ°ÑĞ¸Ñ‡ÑƒÑ” Ğ¾Ñ€Ğ³Ğ°Ğ½Ñ–Ğ·Ğ¼ ĞºĞ¸ÑĞ½ĞµĞ¼. Ğ”Ğ¸Ñ…Ğ°Ğ¹Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· Ğ½Ñ–Ñ."
        ),
        BreathingExercise(
            id = 7,
            title = "Ğ Ğ¾Ğ·ÑĞ»Ğ°Ğ±Ğ»ÑÑÑ‡Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 60,
            pattern = BreathingPattern(
                inhaleSeconds = 4,
                exhaleSeconds = 8
            ),
            description = "ĞŸĞ¾Ğ´Ğ²Ñ–Ğ¹Ğ½Ğ° Ñ‚Ñ€Ğ¸Ğ²Ğ°Ğ»Ñ–ÑÑ‚ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ…Ñƒ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ñ€Ğ¾Ğ·ÑĞ»Ğ°Ğ±Ğ»ÑÑ”. Ğ’Ñ–Ğ´Ñ‡ÑƒĞ¹Ñ‚Ğµ Ğ½Ğ°Ğ¿Ñ€ÑƒĞ³Ñƒ Ñ‰Ğ¾ Ğ¹Ğ´Ğµ."
        ),
        BreathingExercise(
            id = 8,
            title = "Ğ Ğ¸Ñ‚Ğ¼Ñ–Ñ‡Ğ½Ğµ Ğ´Ğ¸Ñ…Ğ°Ğ½Ğ½Ñ",
            durationSeconds = 45,
            pattern = BreathingPattern(
                inhaleSeconds = 3,
                inhaleHoldSeconds = 3,
                exhaleSeconds = 3,
                exhaleHoldSeconds = 3
            ),
            description = "Ğ Ñ–Ğ²Ğ½Ğ¸Ğ¹ Ñ€Ğ¸Ñ‚Ğ¼ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ” Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ ÑÑ‚Ğ°Ğ½. Ğ—Ğ¾ÑĞµÑ€ĞµĞ´ÑŒÑ‚ĞµÑÑ Ğ½Ğ° Ñ€Ğ°Ñ…ÑƒĞ½ĞºÑƒ."
        )
    )
}
```

### 2. BreathingEvent.kt

```kotlin
package com.aivoicepower.ui.screens.warmup

sealed class BreathingEvent {
    data class ExerciseClicked(val exercise: BreathingExercise) : BreathingEvent()
    object ExerciseDialogDismissed : BreathingEvent()
    object StartBreathing : BreathingEvent()
    object PauseBreathing : BreathingEvent()
    data class Tick(val elapsedSeconds: Int, val phase: BreathingPhase, val phaseProgress: Float) : BreathingEvent()
    object MarkAsCompleted : BreathingEvent()
    object SkipExercise : BreathingEvent()
}
```

### 3. BreathingViewModel.kt

```kotlin
package com.aivoicepower.ui.screens.warmup

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.aivoicepower.data.local.database.dao.WarmupCompletionDao
import com.aivoicepower.data.local.database.entity.WarmupCompletionEntity
import com.aivoicepower.data.local.datastore.UserPreferencesDataStore
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.Job
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.flow.update
import kotlinx.coroutines.launch
import java.text.SimpleDateFormat
import java.util.*
import javax.inject.Inject

@HiltViewModel
class BreathingViewModel @Inject constructor(
    private val warmupCompletionDao: WarmupCompletionDao,
    private val userPreferencesDataStore: UserPreferencesDataStore
) : ViewModel() {
    
    private val _state = MutableStateFlow(BreathingState())
    val state: StateFlow<BreathingState> = _state.asStateFlow()
    
    private var breathingJob: Job? = null
    
    init {
        loadTodayProgress()
    }
    
    fun onEvent(event: BreathingEvent) {
        when (event) {
            is BreathingEvent.ExerciseClicked -> {
                _state.update {
                    it.copy(
                        selectedExercise = event.exercise,
                        isExerciseDialogOpen = true,
                        totalSeconds = event.exercise.durationSeconds,
                        elapsedSeconds = 0,
                        currentPhase = BreathingPhase.INHALE,
                        phaseProgress = 0f,
                        isRunning = false
                    )
                }
            }
            
            BreathingEvent.ExerciseDialogDismissed -> {
                stopBreathing()
                _state.update {
                    it.copy(
                        selectedExercise = null,
                        isExerciseDialogOpen = false
                    )
                }
            }
            
            BreathingEvent.StartBreathing -> {
                startBreathing()
            }
            
            BreathingEvent.PauseBreathing -> {
                stopBreathing()
            }
            
            is BreathingEvent.Tick -> {
                _state.update {
                    it.copy(
                        elapsedSeconds = event.elapsedSeconds,
                        currentPhase = event.phase,
                        phaseProgress = event.phaseProgress
                    )
                }
                
                // Auto-complete when done
                if (event.elapsedSeconds >= _state.value.totalSeconds) {
                    stopBreathing()
                    markCurrentAsCompleted()
                }
            }
            
            BreathingEvent.MarkAsCompleted -> {
                markCurrentAsCompleted()
            }
            
            BreathingEvent.SkipExercise -> {
                stopBreathing()
                _state.update {
                    it.copy(
                        selectedExercise = null,
                        isExerciseDialogOpen = false
                    )
                }
            }
        }
    }
    
    private fun loadTodayProgress() {
        viewModelScope.launch {
            val today = getCurrentDateString()
            val completion = warmupCompletionDao.getCompletion(today, "breathing")
            
            if (completion != null) {
                val completed = (1..completion.exercisesCompleted).toSet()
                _state.update { it.copy(completedToday = completed) }
            }
        }
    }
    
    private fun startBreathing() {
        stopBreathing()
        
        _state.update { it.copy(isRunning = true) }
        
        val pattern = _state.value.selectedExercise?.pattern ?: return
        
        breathingJob = viewModelScope.launch {
            var elapsed = _state.value.elapsedSeconds
            var cycleStart = elapsed % pattern.cycleDurationSeconds
            
            while (_state.value.isRunning && elapsed < _state.value.totalSeconds) {
                delay(100) // ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ ĞºĞ¾Ğ¶Ğ½Ñ– 100ms Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ¾Ñ— Ğ°Ğ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ—
                
                elapsed += 0.1f.toInt()
                cycleStart += 0.1f.toInt()
                
                val (phase, progress) = calculatePhaseAndProgress(cycleStart, pattern)
                
                onEvent(BreathingEvent.Tick(elapsed, phase, progress))
                
                // Reset cycle
                if (cycleStart >= pattern.cycleDurationSeconds) {
                    cycleStart = 0
                }
            }
        }
    }
    
    private fun stopBreathing() {
        breathingJob?.cancel()
        _state.update { it.copy(isRunning = false) }
    }
    
    private fun calculatePhaseAndProgress(
        secondsInCycle: Int,
        pattern: BreathingPattern
    ): Pair<BreathingPhase, Float> {
        var remaining = secondsInCycle
        
        // INHALE
        if (remaining < pattern.inhaleSeconds) {
            return BreathingPhase.INHALE to (remaining.toFloat() / pattern.inhaleSeconds)
        }
        remaining -= pattern.inhaleSeconds
        
        // INHALE_HOLD
        if (pattern.inhaleHoldSeconds > 0 && remaining < pattern.inhaleHoldSeconds) {
            return BreathingPhase.INHALE_HOLD to (remaining.toFloat() / pattern.inhaleHoldSeconds)
        }
        remaining -= pattern.inhaleHoldSeconds
        
        // EXHALE
        if (remaining < pattern.exhaleSeconds) {
            return BreathingPhase.EXHALE to (remaining.toFloat() / pattern.exhaleSeconds)
        }
        remaining -= pattern.exhaleSeconds
        
        // EXHALE_HOLD
        if (pattern.exhaleHoldSeconds > 0 && remaining < pattern.exhaleHoldSeconds) {
            return BreathingPhase.EXHALE_HOLD to (remaining.toFloat() / pattern.exhaleHoldSeconds)
        }
        
        return BreathingPhase.INHALE to 0f
    }
    
    private fun markCurrentAsCompleted() {
        val exerciseId = _state.value.selectedExercise?.id ?: return
        
        _state.update {
            it.copy(
                completedToday = it.completedToday + exerciseId,
                selectedExercise = null,
                isExerciseDialogOpen = false
            )
        }
        
        saveProgress()
    }
    
    private fun saveProgress() {
        viewModelScope.launch {
            val today = getCurrentDateString()
            val totalExercises = _state.value.exercises.size
            val completedCount = _state.value.completedToday.size
            
            val entity = WarmupCompletionEntity(
                id = "${today}_breathing",
                date = today,
                category = "breathing",
                completedAt = System.currentTimeMillis(),
                exercisesCompleted = completedCount,
                totalExercises = totalExercises
            )
            
            warmupCompletionDao.insertOrUpdate(entity)
            
            // ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ DataStore
            val estimatedMinutes = 2
            if (completedCount == totalExercises) {
                userPreferencesDataStore.updateSessionStats(
                    date = today,
                    minutes = estimatedMinutes,
                    exercises = 1
                )
            }
        }
    }
    
    private fun getCurrentDateString(): String {
        val sdf = SimpleDateFormat("yyyy-MM-dd", Locale.getDefault())
        return sdf.format(Date())
    }
}
```

### 4. BreathingScreen.kt

```kotlin
package com.aivoicepower.ui.screens.warmup

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.itemsIndexed
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ArrowBack
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import androidx.hilt.navigation.compose.hiltViewModel
import androidx.lifecycle.compose.collectAsStateWithLifecycle
import com.aivoicepower.ui.screens.warmup.components.*

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun BreathingScreen(
    viewModel: BreathingViewModel = hiltViewModel(),
    onNavigateBack: () -> Unit
) {
    val state by viewModel.state.collectAsStateWithLifecycle()
    
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("Ğ”Ğ¸Ñ…Ğ°Ğ»ÑŒĞ½Ñ– Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ¸") },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(Icons.Default.ArrowBack, contentDescription = "ĞĞ°Ğ·Ğ°Ğ´")
                    }
                }
            )
        }
    ) { paddingValues ->
        Column(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
        ) {
            // Progress header
            Surface(
                modifier = Modifier.fillMaxWidth(),
                tonalElevation = 2.dp
            ) {
                Column(
                    modifier = Modifier.padding(16.dp),
                    verticalArrangement = Arrangement.spacedBy(8.dp)
                ) {
                    Text(
                        text = "Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾: ${state.completedToday.size}/${state.exercises.size}",
                        style = MaterialTheme.typography.titleMedium
                    )
                    
                    LinearProgressIndicator(
                        progress = { state.completedToday.size.toFloat() / state.exercises.size },
                        modifier = Modifier
                            .fillMaxWidth()
                            .height(8.dp)
                    )
                }
            }
            
            // Exercise list
            LazyColumn(
                modifier = Modifier.weight(1f),
                contentPadding = PaddingValues(16.dp),
                verticalArrangement = Arrangement.spacedBy(8.dp)
            ) {
                itemsIndexed(state.exercises) { index, exercise ->
                    BreathingExerciseItem(
                        exercise = exercise,
                        isCompleted = state.completedToday.contains(exercise.id),
                        onClick = {
                            viewModel.onEvent(BreathingEvent.ExerciseClicked(exercise))
                        }
                    )
                }
                
                // Finish button
                item {
                    if (state.completedToday.size == state.exercises.size) {
                        Spacer(modifier = Modifier.height(8.dp))
                        
                        Button(
                            onClick = onNavigateBack,
                            modifier = Modifier.fillMaxWidth()
                        ) {
                            Text("Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚Ğ¸ Ñ€Ğ¾Ğ·Ğ¼Ğ¸Ğ½ĞºÑƒ âœ“")
                        }
                    }
                }
            }
        }
        
        // Exercise dialog (fullscreen)
        if (state.isExerciseDialogOpen && state.selectedExercise != null) {
            BreathingExerciseDialog(
                exercise = state.selectedExercise!!,
                elapsedSeconds = state.elapsedSeconds,
                totalSeconds = state.totalSeconds,
                currentPhase = state.currentPhase,
                phaseProgress = state.phaseProgress,
                isRunning = state.isRunning,
                onDismiss = {
                    viewModel.onEvent(BreathingEvent.ExerciseDialogDismissed)
                },
                onStart = {
                    viewModel.onEvent(BreathingEvent.StartBreathing)
                },
                onPause = {
                    viewModel.onEvent(BreathingEvent.PauseBreathing)
                },
                onMarkCompleted = {
                    viewModel.onEvent(BreathingEvent.MarkAsCompleted)
                },
                onSkip = {
                    viewModel.onEvent(BreathingEvent.SkipExercise)
                }
            )
        }
    }
}
```

### 5. components/BreathingExerciseItem.kt

```kotlin
package com.aivoicepower.ui.screens.warmup.components

import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.CheckCircle
import androidx.compose.material.icons.outlined.Circle
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import com.aivoicepower.ui.screens.warmup.BreathingExercise

@Composable
fun BreathingExerciseItem(
    exercise: BreathingExercise,
    isCompleted: Boolean,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
) {
    Card(
        onClick = onClick,
        modifier = modifier.fillMaxWidth(),
        colors = if (isCompleted) {
            CardDefaults.cardColors(
                containerColor = MaterialTheme.colorScheme.primaryContainer
            )
        } else {
            CardDefaults.cardColors()
        }
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Row(
                horizontalArrangement = Arrangement.spacedBy(12.dp),
                verticalAlignment = Alignment.CenterVertically,
                modifier = Modifier.weight(1f)
            ) {
                Icon(
                    imageVector = if (isCompleted) Icons.Filled.CheckCircle else Icons.Outlined.Circle,
                    contentDescription = null,
                    tint = if (isCompleted) {
                        MaterialTheme.colorScheme.primary
                    } else {
                        MaterialTheme.colorScheme.onSurfaceVariant
                    }
                )
                
                Column {
                    Text(
                        text = "${exercise.id}. ${exercise.title}",
                        style = MaterialTheme.typography.bodyLarge
                    )
                    Text(
                        text = formatPattern(exercise.pattern),
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }
            
            Text(
                text = "${exercise.durationSeconds} ÑĞµĞº",
                style = MaterialTheme.typography.bodySmall,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }
    }
}

private fun formatPattern(pattern: com.aivoicepower.ui.screens.warmup.BreathingPattern): String {
    val parts = mutableListOf<String>()
    
    parts.add("${pattern.inhaleSeconds}Ñ Ğ²Ğ´Ğ¸Ñ…")
    if (pattern.inhaleHoldSeconds > 0) parts.add("${pattern.inhaleHoldSeconds}Ñ Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°")
    parts.add("${pattern.exhaleSeconds}Ñ Ğ²Ğ¸Ğ´Ğ¸Ñ…")
    if (pattern.exhaleHoldSeconds > 0) parts.add("${pattern.exhaleHoldSeconds}Ñ Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°")
    
    return parts.joinToString(", ")
}
```

### 6. components/BreathingExerciseDialog.kt

```kotlin
package com.aivoicepower.ui.screens.warmup.components

import android.content.Context
import android.os.Build
import android.os.VibrationEffect
import android.os.Vibrator
import android.os.VibratorManager
import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Close
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.unit.dp
import androidx.compose.ui.window.Dialog
import androidx.compose.ui.window.DialogProperties
import com.aivoicepower.ui.screens.warmup.BreathingExercise
import com.aivoicepower.ui.screens.warmup.BreathingPhase
import com.aivoicepower.ui.components.breathing.BreathingAnimation

@Composable
fun BreathingExerciseDialog(
    exercise: BreathingExercise,
    elapsedSeconds: Int,
    totalSeconds: Int,
    currentPhase: BreathingPhase,
    phaseProgress: Float,
    isRunning: Boolean,
    onDismiss: () -> Unit,
    onStart: () -> Unit,
    onPause: () -> Unit,
    onMarkCompleted: () -> Unit,
    onSkip: () -> Unit
) {
    val context = LocalContext.current
    
    // Haptic feedback on phase change
    var lastPhase by remember { mutableStateOf(currentPhase) }
    
    LaunchedEffect(currentPhase) {
        if (currentPhase != lastPhase && isRunning) {
            triggerHapticFeedback(context)
            lastPhase = currentPhase
        }
    }
    
    Dialog(
        onDismissRequest = onDismiss,
        properties = DialogProperties(
            usePlatformDefaultWidth = false
        )
    ) {
        Surface(
            modifier = Modifier.fillMaxSize(),
            color = MaterialTheme.colorScheme.background
        ) {
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(24.dp),
                verticalArrangement = Arrangement.SpaceBetween
            ) {
                // Header
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceBetween,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text(
                        text = exercise.title,
                        style = MaterialTheme.typography.headlineSmall,
                        modifier = Modifier.weight(1f)
                    )
                    
                    IconButton(onClick = onDismiss) {
                        Icon(Icons.Default.Close, contentDescription = "Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¸")
                    }
                }
                
                // Breathing Animation (CENTER)
                Box(
                    modifier = Modifier
                        .fillMaxWidth()
                        .weight(1f),
                    contentAlignment = Alignment.Center
                ) {
                    Column(
                        horizontalAlignment = Alignment.CenterHorizontally,
                        verticalArrangement = Arrangement.spacedBy(24.dp)
                    ) {
                        // Animated Circle
                        BreathingAnimation(
                            phase = currentPhase,
                            progress = phaseProgress,
                            modifier = Modifier.size(250.dp)
                        )
                        
                        // Phase text
                        Text(
                            text = getPhaseText(currentPhase),
                            style = MaterialTheme.typography.headlineLarge,
                            color = MaterialTheme.colorScheme.primary
                        )
                        
                        // Timer
                        Text(
                            text = "%02d:%02d / %02d:%02d".format(
                                elapsedSeconds / 60,
                                elapsedSeconds % 60,
                                totalSeconds / 60,
                                totalSeconds % 60
                            ),
                            style = MaterialTheme.typography.titleMedium,
                            color = MaterialTheme.colorScheme.onSurfaceVariant
                        )
                    }
                }
                
                // Bottom controls
                Column(
                    verticalArrangement = Arrangement.spacedBy(16.dp)
                ) {
                    // Progress
                    LinearProgressIndicator(
                        progress = { elapsedSeconds.toFloat() / totalSeconds },
                        modifier = Modifier.fillMaxWidth()
                    )
                    
                    // Pattern description
                    Card(
                        colors = CardDefaults.cardColors(
                            containerColor = MaterialTheme.colorScheme.secondaryContainer
                        )
                    ) {
                        Column(
                            modifier = Modifier.padding(16.dp),
                            verticalArrangement = Arrangement.spacedBy(4.dp)
                        ) {
                            Text(
                                text = "ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½:",
                                style = MaterialTheme.typography.labelMedium,
                                color = MaterialTheme.colorScheme.onSecondaryContainer
                            )
                            Text(
                                text = formatPatternDescription(exercise.pattern),
                                style = MaterialTheme.typography.bodySmall,
                                color = MaterialTheme.colorScheme.onSecondaryContainer
                            )
                        }
                    }
                    
                    // Start/Pause button
                    Button(
                        onClick = if (isRunning) onPause else onStart,
                        modifier = Modifier.fillMaxWidth()
                    ) {
                        Text(if (isRunning) "â¸ï¸ ĞŸĞ°ÑƒĞ·Ğ°" else "â–¶ï¸ Ğ¡Ñ‚Ğ°Ñ€Ñ‚")
                    }
                    
                    // Action buttons
                    Row(
                        modifier = Modifier.fillMaxWidth(),
                        horizontalArrangement = Arrangement.spacedBy(8.dp)
                    ) {
                        OutlinedButton(
                            onClick = onSkip,
                            modifier = Modifier.weight(1f)
                        ) {
                            Text("ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸")
                        }
                        
                        Button(
                            onClick = onMarkCompleted,
                            modifier = Modifier.weight(1f)
                        ) {
                            Text("Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ âœ“")
                        }
                    }
                }
            }
        }
    }
}

private fun getPhaseText(phase: BreathingPhase): String {
    return when (phase) {
        BreathingPhase.INHALE -> "Ğ’Ğ´Ğ¸Ñ…..."
        BreathingPhase.INHALE_HOLD -> "Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°..."
        BreathingPhase.EXHALE -> "Ğ’Ğ¸Ğ´Ğ¸Ñ…..."
        BreathingPhase.EXHALE_HOLD -> "Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°..."
    }
}

private fun formatPatternDescription(pattern: com.aivoicepower.ui.screens.warmup.BreathingPattern): String {
    val parts = mutableListOf<String>()
    
    parts.add("${pattern.inhaleSeconds} ÑĞµĞº Ğ²Ğ´Ğ¸Ñ…")
    if (pattern.inhaleHoldSeconds > 0) parts.add("${pattern.inhaleHoldSeconds} ÑĞµĞº Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°")
    parts.add("${pattern.exhaleSeconds} ÑĞµĞº Ğ²Ğ¸Ğ´Ğ¸Ñ…")
    if (pattern.exhaleHoldSeconds > 0) parts.add("${pattern.exhaleHoldSeconds} ÑĞµĞº Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°")
    
    return parts.joinToString(" â†’ ")
}

@Suppress("DEPRECATION")
private fun triggerHapticFeedback(context: Context) {
    try {
        val vibrator = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {
            val vibratorManager = context.getSystemService(Context.VIBRATOR_MANAGER_SERVICE) as VibratorManager
            vibratorManager.defaultVibrator
        } else {
            context.getSystemService(Context.VIBRATOR_SERVICE) as Vibrator
        }
        
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            vibrator.vibrate(VibrationEffect.createOneShot(50, VibrationEffect.DEFAULT_AMPLITUDE))
        } else {
            vibrator.vibrate(50)
        }
    } catch (e: Exception) {
        // Ignore vibration errors
    }
}
```

### 7. ui/components/breathing/BreathingAnimation.kt

```kotlin
package com.aivoicepower.ui.components.breathing

import androidx.compose.animation.core.*
import androidx.compose.foundation.Canvas
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material3.MaterialTheme
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.graphics.Brush
import androidx.compose.ui.graphics.Color
import com.aivoicepower.ui.screens.warmup.BreathingPhase

@Composable
fun BreathingAnimation(
    phase: BreathingPhase,
    progress: Float,
    modifier: Modifier = Modifier
) {
    val primaryColor = MaterialTheme.colorScheme.primary
    val secondaryColor = MaterialTheme.colorScheme.secondary
    
    // Calculate scale based on phase
    val targetScale = when (phase) {
        BreathingPhase.INHALE -> 0.5f + (progress * 0.5f) // 0.5 â†’ 1.0
        BreathingPhase.INHALE_HOLD -> 1.0f
        BreathingPhase.EXHALE -> 1.0f - (progress * 0.5f) // 1.0 â†’ 0.5
        BreathingPhase.EXHALE_HOLD -> 0.5f
    }
    
    val animatedScale by animateFloatAsState(
        targetValue = targetScale,
        animationSpec = tween(durationMillis = 300, easing = LinearEasing),
        label = "breathing_scale"
    )
    
    Canvas(modifier = modifier.fillMaxSize()) {
        val center = Offset(size.width / 2f, size.height / 2f)
        val maxRadius = size.minDimension / 2f
        val currentRadius = maxRadius * animatedScale
        
        // Gradient circle
        drawCircle(
            brush = Brush.radialGradient(
                colors = listOf(
                    primaryColor.copy(alpha = 0.3f),
                    secondaryColor.copy(alpha = 0.1f)
                ),
                center = center,
                radius = currentRadius
            ),
            radius = currentRadius,
            center = center
        )
        
        // Outer ring
        drawCircle(
            color = primaryColor.copy(alpha = 0.5f),
            radius = currentRadius,
            center = center,
            style = androidx.compose.ui.graphics.drawscope.Stroke(width = 4f)
        )
    }
}
```

---

## AndroidManifest.xml

Ğ”Ğ¾Ğ´Ğ°Ğ¹ Ğ´Ğ¾Ğ·Ğ²Ñ–Ğ» Ğ´Ğ»Ñ Ğ²Ñ–Ğ±Ñ€Ğ°Ñ†Ñ–Ñ—:

```xml
<uses-permission android:name="android.permission.VIBRATE" />
```

---

## ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ°

### 1. ĞšĞ¾Ğ¼Ğ¿Ñ–Ğ»ÑÑ†Ñ–Ñ
```bash
./gradlew assembleDebug
```

### 2. Testing Flow

**Ğ¢ĞµÑÑ‚ 1: Exercise List**
- [ ] 8 Ğ²Ğ¿Ñ€Ğ°Ğ² Ğ²Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑŒÑÑ Ğ· Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°Ğ¼Ğ¸
- [ ] Progress bar Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ” 0/8

**Ğ¢ĞµÑÑ‚ 2: Breathing Animation**
- [ ] ĞšĞ»Ñ–Ğº Ğ½Ğ° Ğ²Ğ¿Ñ€Ğ°Ğ²Ñƒ â†’ fullscreen dialog
- [ ] ĞšĞ¾Ğ»Ğ¾ Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ÑÑ”Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ²Ğ´Ğ¸Ñ…Ñƒ
- [ ] ĞšĞ¾Ğ»Ğ¾ ÑÑ‚Ğ¸ÑĞºĞ°Ñ”Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ²Ğ¸Ğ´Ğ¸Ñ…Ñƒ
- [ ] ĞšĞ¾Ğ»Ğ¾ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ñ‚Ñ€Ğ¸Ğ¼Ñ†Ñ–
- [ ] ĞĞ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ° (60 FPS)

**Ğ¢ĞµÑÑ‚ 3: Phase Transitions**
- [ ] Ğ¢ĞµĞºÑÑ‚ Ğ¼Ñ–Ğ½ÑÑ”Ñ‚ÑŒÑÑ: "Ğ’Ğ´Ğ¸Ñ…..." â†’ "Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°..." â†’ "Ğ’Ğ¸Ğ´Ğ¸Ñ…..."
- [ ] Ğ’Ñ–Ğ±Ñ€Ğ°Ñ†Ñ–Ñ ÑĞ¿Ñ€Ğ°Ñ†ÑŒĞ¾Ğ²ÑƒÑ” Ğ½Ğ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°Ñ…
- [ ] Progress bar Ğ¾Ğ½Ğ¾Ğ²Ğ»ÑÑ”Ñ‚ÑŒÑÑ

**Ğ¢ĞµÑÑ‚ 4: Timer**
- [ ] Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ¹Ğ´Ğµ Ğ²Ñ–Ğ´ 00:00 Ğ´Ğ¾ XX:XX
- [ ] "Ğ¡Ñ‚Ğ°Ñ€Ñ‚" â†’ Ğ°Ğ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ Ğ¿Ğ¾Ñ‡Ğ¸Ğ½Ğ°Ñ”Ñ‚ÑŒÑÑ
- [ ] "ĞŸĞ°ÑƒĞ·Ğ°" â†’ Ğ°Ğ½Ñ–Ğ¼Ğ°Ñ†Ñ–Ñ Ğ·ÑƒĞ¿Ğ¸Ğ½ÑÑ”Ñ‚ÑŒÑÑ
- [ ] Auto-complete ĞºĞ¾Ğ»Ğ¸ Ñ‡Ğ°Ñ Ğ·Ğ°ĞºÑ–Ğ½Ñ‡ÑƒÑ”Ñ‚ÑŒÑÑ

**Ğ¢ĞµÑÑ‚ 5: Completion**
- [ ] "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾" â†’ Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ¿Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°Ñ”Ñ‚ÑŒÑÑ âœ…
- [ ] Ğ”Ğ°Ğ½Ñ– Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‚ÑŒÑÑ Ğ² Room
- [ ] Progress Ğ¾Ğ½Ğ¾Ğ²Ğ»ÑÑ”Ñ‚ÑŒÑÑ

---

## ĞÑ‡Ñ–ĞºÑƒĞ²Ğ°Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚

âœ… BreathingScreen Ğ· 8 Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ°Ğ¼Ğ¸ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¾
âœ… Canvas animation (ĞºĞ¾Ğ»Ğ¾ Ñ‰Ğ¾ Ğ´Ğ¸Ñ…Ğ°Ñ”)
âœ… Haptic feedback Ğ½Ğ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°Ñ…
âœ… Fullscreen breathing dialog
âœ… Phase text ("Ğ’Ğ´Ğ¸Ñ…", "Ğ’Ğ¸Ğ´Ğ¸Ñ…", "Ğ—Ğ°Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°")
âœ… Progress tracking Ğ· Room
âœ… Auto-complete Ğ¿Ğ¾ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€Ñƒ

---

## ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹ ĞºÑ€Ğ¾Ğº

**Phase 2.4: Voice Warmup Screen** â€” 6 Ğ²Ğ¿Ñ€Ğ°Ğ² Ğ· Ğ°ÑƒĞ´Ñ–Ğ¾ Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ°Ğ¼Ğ¸ (optional).

---

**Ğ§Ğ°Ñ Ğ½Ğ° Phase 2.3:** ~3-4 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸

**âš ï¸ Ğ¦Ğµ Ğ½Ğ°Ğ¹ÑĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑˆĞ° Ğ¿Ñ–Ğ´Ñ„Ğ°Ğ·Ğ° Phase 2** â€” Canvas animations, haptic feedback, ÑĞºĞ»Ğ°Ğ´Ğ½Ğ° Ğ»Ğ¾Ğ³Ñ–ĞºĞ° Ñ„Ğ°Ğ·.